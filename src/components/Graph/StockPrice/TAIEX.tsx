import api from "@/utils/api";
import { Card, Spinner } from "@nextui-org/react";
import HighchartsReact from "highcharts-react-official";
import Highcharts from "highcharts/highstock";
import { useEffect, useState } from "react";
import { useLocation } from "react-router-dom";
import timeSelector from "../TimeSelect";

interface PERProps {
  minute: string;
  date: string;
  TAIEX: number;
}

const dataForDemo = [
  {
    x: 1702976400000,
    y: 17652.03,
  },
  {
    x: 1702976450000,
    y: 17649.5,
  },
  {
    x: 1702976500000,
    y: 17643.63,
  },
  {
    x: 1702976550000,
    y: 17648.17,
  },
  {
    x: 1702976600000,
    y: 17646.26,
  },
  {
    x: 1702976650000,
    y: 17646.3,
  },
  {
    x: 1702976700000,
    y: 17637.44,
  },
  {
    x: 1702976750000,
    y: 17636.37,
  },
  {
    x: 1702976800000,
    y: 17644.01,
  },
  {
    x: 1702976850000,
    y: 17631.76,
  },
  {
    x: 1702976900000,
    y: 17622.61,
  },
  {
    x: 1702976950000,
    y: 17622.87,
  },
  {
    x: 1702977000000,
    y: 17626.57,
  },
  {
    x: 1702977050000,
    y: 17632.4,
  },
  {
    x: 1702977100000,
    y: 17618.23,
  },
  {
    x: 1702977150000,
    y: 17614.5,
  },
  {
    x: 1702977200000,
    y: 17610.1,
  },
  {
    x: 1702977250000,
    y: 17619.92,
  },
  {
    x: 1702977300000,
    y: 17608.98,
  },
  {
    x: 1702977350000,
    y: 17599.31,
  },
  {
    x: 1702977400000,
    y: 17597.18,
  },
  {
    x: 1702977450000,
    y: 17595.82,
  },
  {
    x: 1702977500000,
    y: 17599.04,
  },
  {
    x: 1702977550000,
    y: 17605.98,
  },
  {
    x: 1702977600000,
    y: 17603.15,
  },
  {
    x: 1702977650000,
    y: 17592.9,
  },
  {
    x: 1702977700000,
    y: 17585.7,
  },
  {
    x: 1702977750000,
    y: 17583.36,
  },
  {
    x: 1702977800000,
    y: 17580.81,
  },
  {
    x: 1702977850000,
    y: 17578.95,
  },
  {
    x: 1702977900000,
    y: 17580.65,
  },
  {
    x: 1702977950000,
    y: 17579.83,
  },
  {
    x: 1702978000000,
    y: 17588.21,
  },
  {
    x: 1702978050000,
    y: 17590.58,
  },
  {
    x: 1702978100000,
    y: 17590.1,
  },
  {
    x: 1702978150000,
    y: 17586.86,
  },
  {
    x: 1702978200000,
    y: 17588.37,
  },
  {
    x: 1702978250000,
    y: 17583.34,
  },
  {
    x: 1702978300000,
    y: 17593.96,
  },
  {
    x: 1702978350000,
    y: 17592.47,
  },
  {
    x: 1702978400000,
    y: 17590.43,
  },
  {
    x: 1702978450000,
    y: 17583.42,
  },
  {
    x: 1702978500000,
    y: 17579.03,
  },
  {
    x: 1702978550000,
    y: 17580.34,
  },
  {
    x: 1702978600000,
    y: 17577.21,
  },
  {
    x: 1702978650000,
    y: 17572.4,
  },
  {
    x: 1702978700000,
    y: 17569.9,
  },
  {
    x: 1702978750000,
    y: 17557.9,
  },
  {
    x: 1702978800000,
    y: 17555.63,
  },
  {
    x: 1702978850000,
    y: 17564.66,
  },
  {
    x: 1702978900000,
    y: 17564.9,
  },
  {
    x: 1702978950000,
    y: 17551.2,
  },
  {
    x: 1702979000000,
    y: 17560.43,
  },
  {
    x: 1702979050000,
    y: 17550.64,
  },
  {
    x: 1702979100000,
    y: 17551.6,
  },
  {
    x: 1702979150000,
    y: 17549.98,
  },
  {
    x: 1702979200000,
    y: 17549.18,
  },
  {
    x: 1702979250000,
    y: 17549.22,
  },
  {
    x: 1702979300000,
    y: 17549.86,
  },
  {
    x: 1702979350000,
    y: 17559.64,
  },
  {
    x: 1702979400000,
    y: 17552.52,
  },
  {
    x: 1702979450000,
    y: 17551.75,
  },
  {
    x: 1702979500000,
    y: 17553.04,
  },
  {
    x: 1702979550000,
    y: 17560.85,
  },
  {
    x: 1702979600000,
    y: 17563.15,
  },
  {
    x: 1702979650000,
    y: 17553.72,
  },
  {
    x: 1702979700000,
    y: 17551.9,
  },
  {
    x: 1702979750000,
    y: 17558.3,
  },
  {
    x: 1702979800000,
    y: 17554.97,
  },
  {
    x: 1702979850000,
    y: 17568.42,
  },
  {
    x: 1702979900000,
    y: 17555.61,
  },
  {
    x: 1702979950000,
    y: 17552.55,
  },
  {
    x: 1702980000000,
    y: 17552.74,
  },
  {
    x: 1702980050000,
    y: 17549.1,
  },
  {
    x: 1702980100000,
    y: 17550.4,
  },
  {
    x: 1702980150000,
    y: 17549.26,
  },
  {
    x: 1702980200000,
    y: 17546.07,
  },
  {
    x: 1702980250000,
    y: 17549.63,
  },
  {
    x: 1702980300000,
    y: 17548.11,
  },
  {
    x: 1702980350000,
    y: 17552.06,
  },
  {
    x: 1702980400000,
    y: 17546.03,
  },
  {
    x: 1702980450000,
    y: 17556.21,
  },
  {
    x: 1702980500000,
    y: 17555.41,
  },
  {
    x: 1702980550000,
    y: 17547.33,
  },
  {
    x: 1702980600000,
    y: 17542.19,
  },
  {
    x: 1702980650000,
    y: 17549.38,
  },
  {
    x: 1702980700000,
    y: 17549.35,
  },
  {
    x: 1702980750000,
    y: 17539.24,
  },
  {
    x: 1702980800000,
    y: 17532.7,
  },
  {
    x: 1702980850000,
    y: 17538.98,
  },
  {
    x: 1702980900000,
    y: 17527.03,
  },
  {
    x: 1702980950000,
    y: 17526.05,
  },
  {
    x: 1702981000000,
    y: 17525.94,
  },
  {
    x: 1702981050000,
    y: 17525.64,
  },
  {
    x: 1702981100000,
    y: 17522.15,
  },
  {
    x: 1702981150000,
    y: 17521.81,
  },
  {
    x: 1702981200000,
    y: 17521.93,
  },
  {
    x: 1702981250000,
    y: 17525.45,
  },
  {
    x: 1702981300000,
    y: 17526.83,
  },
  {
    x: 1702981350000,
    y: 17528.79,
  },
  {
    x: 1702981400000,
    y: 17528.75,
  },
  {
    x: 1702981450000,
    y: 17529.55,
  },
  {
    x: 1702981500000,
    y: 17522.59,
  },
  {
    x: 1702981550000,
    y: 17529.92,
  },
  {
    x: 1702981600000,
    y: 17533.21,
  },
  {
    x: 1702981650000,
    y: 17526.51,
  },
  {
    x: 1702981700000,
    y: 17547.36,
  },
  {
    x: 1702981750000,
    y: 17538.51,
  },
  {
    x: 1702981800000,
    y: 17547.21,
  },
  {
    x: 1702981850000,
    y: 17540.32,
  },
  {
    x: 1702981900000,
    y: 17547.71,
  },
  {
    x: 1702981950000,
    y: 17552.6,
  },
  {
    x: 1702982000000,
    y: 17550.93,
  },
  {
    x: 1702982050000,
    y: 17549.55,
  },
  {
    x: 1702982100000,
    y: 17552.26,
  },
  {
    x: 1702982150000,
    y: 17554.86,
  },
  {
    x: 1702982200000,
    y: 17556.63,
  },
  {
    x: 1702982250000,
    y: 17562.81,
  },
  {
    x: 1702982300000,
    y: 17556.65,
  },
  {
    x: 1702982350000,
    y: 17552.14,
  },
  {
    x: 1702982400000,
    y: 17555.85,
  },
  {
    x: 1702982450000,
    y: 17557.62,
  },
  {
    x: 1702982500000,
    y: 17557.76,
  },
  {
    x: 1702982550000,
    y: 17549.1,
  },
  {
    x: 1702982600000,
    y: 17557.54,
  },
  {
    x: 1702982650000,
    y: 17547.97,
  },
  {
    x: 1702982700000,
    y: 17549.32,
  },
  {
    x: 1702982750000,
    y: 17556.95,
  },
  {
    x: 1702982800000,
    y: 17547.88,
  },
  {
    x: 1702982850000,
    y: 17545.68,
  },
  {
    x: 1702982900000,
    y: 17547.43,
  },
  {
    x: 1702982950000,
    y: 17549.52,
  },
  {
    x: 1702983000000,
    y: 17551.56,
  },
  {
    x: 1702983050000,
    y: 17559.6,
  },
  {
    x: 1702983100000,
    y: 17562.93,
  },
  {
    x: 1702983150000,
    y: 17562.58,
  },
  {
    x: 1702983200000,
    y: 17564.06,
  },
  {
    x: 1702983250000,
    y: 17554.22,
  },
  {
    x: 1702983300000,
    y: 17548.06,
  },
  {
    x: 1702983350000,
    y: 17539.27,
  },
  {
    x: 1702983400000,
    y: 17545.6,
  },
  {
    x: 1702983450000,
    y: 17549.22,
  },
  {
    x: 1702983500000,
    y: 17540.61,
  },
  {
    x: 1702983550000,
    y: 17549.37,
  },
  {
    x: 1702983600000,
    y: 17540.29,
  },
  {
    x: 1702983650000,
    y: 17540.87,
  },
  {
    x: 1702983700000,
    y: 17539.21,
  },
  {
    x: 1702983750000,
    y: 17539.34,
  },
  {
    x: 1702983800000,
    y: 17550.97,
  },
  {
    x: 1702983850000,
    y: 17552.59,
  },
  {
    x: 1702983900000,
    y: 17554.38,
  },
  {
    x: 1702983950000,
    y: 17544.9,
  },
  {
    x: 1702984000000,
    y: 17551.16,
  },
  {
    x: 1702984050000,
    y: 17554.1,
  },
  {
    x: 1702984100000,
    y: 17547.92,
  },
  {
    x: 1702984150000,
    y: 17545.92,
  },
  {
    x: 1702984200000,
    y: 17556.64,
  },
  {
    x: 1702984250000,
    y: 17555.4,
  },
  {
    x: 1702984300000,
    y: 17543.9,
  },
  {
    x: 1702984350000,
    y: 17551.26,
  },
  {
    x: 1702984400000,
    y: 17555.62,
  },
  {
    x: 1702984450000,
    y: 17549.76,
  },
  {
    x: 1702984500000,
    y: 17556.15,
  },
  {
    x: 1702984550000,
    y: 17556.89,
  },
  {
    x: 1702984600000,
    y: 17548.01,
  },
  {
    x: 1702984650000,
    y: 17548.16,
  },
  {
    x: 1702984700000,
    y: 17557.56,
  },
  {
    x: 1702984750000,
    y: 17548.99,
  },
  {
    x: 1702984800000,
    y: 17541.19,
  },
  {
    x: 1702984850000,
    y: 17531.66,
  },
  {
    x: 1702984900000,
    y: 17541.73,
  },
  {
    x: 1702984950000,
    y: 17530.83,
  },
  {
    x: 1702985000000,
    y: 17537.99,
  },
  {
    x: 1702985050000,
    y: 17533.58,
  },
  {
    x: 1702985100000,
    y: 17542.83,
  },
  {
    x: 1702985150000,
    y: 17541.58,
  },
  {
    x: 1702985200000,
    y: 17542.23,
  },
  {
    x: 1702985250000,
    y: 17535.71,
  },
  {
    x: 1702985300000,
    y: 17542.29,
  },
  {
    x: 1702985350000,
    y: 17544.05,
  },
  {
    x: 1702985400000,
    y: 17529.13,
  },
  {
    x: 1702985450000,
    y: 17536.67,
  },
  {
    x: 1702985500000,
    y: 17527.79,
  },
  {
    x: 1702985550000,
    y: 17537.36,
  },
  {
    x: 1702985600000,
    y: 17530.22,
  },
  {
    x: 1702985650000,
    y: 17532.28,
  },
  {
    x: 1702985700000,
    y: 17537.79,
  },
  {
    x: 1702985750000,
    y: 17531.55,
  },
  {
    x: 1702985800000,
    y: 17537.44,
  },
  {
    x: 1702985850000,
    y: 17531.13,
  },
  {
    x: 1702985900000,
    y: 17542.5,
  },
  {
    x: 1702985950000,
    y: 17533.56,
  },
  {
    x: 1702986000000,
    y: 17541.87,
  },
  {
    x: 1702986050000,
    y: 17541.68,
  },
  {
    x: 1702986100000,
    y: 17545.76,
  },
  {
    x: 1702986150000,
    y: 17535.16,
  },
  {
    x: 1702986200000,
    y: 17544.13,
  },
  {
    x: 1702986250000,
    y: 17537.72,
  },
  {
    x: 1702986300000,
    y: 17535.56,
  },
  {
    x: 1702986350000,
    y: 17547.43,
  },
  {
    x: 1702986400000,
    y: 17540.58,
  },
  {
    x: 1702986450000,
    y: 17549.01,
  },
  {
    x: 1702986500000,
    y: 17548.72,
  },
  {
    x: 1702986550000,
    y: 17548.39,
  },
  {
    x: 1702986600000,
    y: 17545.64,
  },
  {
    x: 1702986650000,
    y: 17546.82,
  },
  {
    x: 1702986700000,
    y: 17549.76,
  },
  {
    x: 1702986750000,
    y: 17545.56,
  },
  {
    x: 1702986800000,
    y: 17540.38,
  },
  {
    x: 1702986850000,
    y: 17549.38,
  },
  {
    x: 1702986900000,
    y: 17536.83,
  },
  {
    x: 1702986950000,
    y: 17538.79,
  },
  {
    x: 1702987000000,
    y: 17537.63,
  },
  {
    x: 1702987050000,
    y: 17538.71,
  },
  {
    x: 1702987100000,
    y: 17534.69,
  },
  {
    x: 1702987150000,
    y: 17537.03,
  },
  {
    x: 1702987200000,
    y: 17536.23,
  },
  {
    x: 1702987250000,
    y: 17535.46,
  },
  {
    x: 1702987300000,
    y: 17532.62,
  },
  {
    x: 1702987350000,
    y: 17535.12,
  },
  {
    x: 1702987400000,
    y: 17541.32,
  },
  {
    x: 1702987450000,
    y: 17519.83,
  },
  {
    x: 1702987500000,
    y: 17531.74,
  },
  {
    x: 1702987550000,
    y: 17521.68,
  },
  {
    x: 1702987600000,
    y: 17525.86,
  },
  {
    x: 1702987650000,
    y: 17516.62,
  },
  {
    x: 1702987700000,
    y: 17519.4,
  },
  {
    x: 1702987750000,
    y: 17517.89,
  },
  {
    x: 1702987800000,
    y: 17518.83,
  },
  {
    x: 1702987850000,
    y: 17518.29,
  },
  {
    x: 1702987900000,
    y: 17520.55,
  },
  {
    x: 1702987950000,
    y: 17515.14,
  },
  {
    x: 1702988000000,
    y: 17501.51,
  },
  {
    x: 1702988050000,
    y: 17503.62,
  },
  {
    x: 1702988100000,
    y: 17500.07,
  },
  {
    x: 1702988150000,
    y: 17503.6,
  },
  {
    x: 1702988200000,
    y: 17507.43,
  },
  {
    x: 1702988250000,
    y: 17512.46,
  },
  {
    x: 1702988300000,
    y: 17506.16,
  },
  {
    x: 1702988350000,
    y: 17507.42,
  },
  {
    x: 1702988400000,
    y: 17518.24,
  },
  {
    x: 1702988450000,
    y: 17516.51,
  },
  {
    x: 1702988500000,
    y: 17508.15,
  },
  {
    x: 1702988550000,
    y: 17520.76,
  },
  {
    x: 1702988600000,
    y: 17520.27,
  },
  {
    x: 1702988650000,
    y: 17511.15,
  },
  {
    x: 1702988700000,
    y: 17521.01,
  },
  {
    x: 1702988750000,
    y: 17512.82,
  },
  {
    x: 1702988800000,
    y: 17511.11,
  },
  {
    x: 1702988850000,
    y: 17514.72,
  },
  {
    x: 1702988900000,
    y: 17521.7,
  },
  {
    x: 1702988950000,
    y: 17517.35,
  },
  {
    x: 1702989000000,
    y: 17516.11,
  },
  {
    x: 1702989050000,
    y: 17515.58,
  },
  {
    x: 1702989100000,
    y: 17531.85,
  },
  {
    x: 1702989150000,
    y: 17542.22,
  },
  {
    x: 1702989200000,
    y: 17542.35,
  },
  {
    x: 1702989250000,
    y: 17530.39,
  },
  {
    x: 1702989300000,
    y: 17533.14,
  },
  {
    x: 1702989350000,
    y: 17534.98,
  },
  {
    x: 1702989400000,
    y: 17535.04,
  },
  {
    x: 1702989450000,
    y: 17536.49,
  },
  {
    x: 1702989500000,
    y: 17528.16,
  },
  {
    x: 1702989550000,
    y: 17527.48,
  },
  {
    x: 1702989600000,
    y: 17537.61,
  },
  {
    x: 1702989650000,
    y: 17529.26,
  },
  {
    x: 1702989700000,
    y: 17537.54,
  },
  {
    x: 1702989750000,
    y: 17539,
  },
  {
    x: 1702989800000,
    y: 17521.45,
  },
  {
    x: 1702989850000,
    y: 17533.64,
  },
  {
    x: 1702989900000,
    y: 17523.03,
  },
  {
    x: 1702989950000,
    y: 17532.7,
  },
  {
    x: 1702990000000,
    y: 17526.27,
  },
  {
    x: 1702990050000,
    y: 17531.55,
  },
  {
    x: 1702990100000,
    y: 17527.77,
  },
  {
    x: 1702990150000,
    y: 17536.96,
  },
  {
    x: 1702990200000,
    y: 17536.89,
  },
  {
    x: 1702990250000,
    y: 17539.25,
  },
  {
    x: 1702990300000,
    y: 17535.58,
  },
  {
    x: 1702990350000,
    y: 17533.53,
  },
  {
    x: 1702990400000,
    y: 17539.56,
  },
  {
    x: 1702990450000,
    y: 17534.19,
  },
  {
    x: 1702990500000,
    y: 17541.32,
  },
  {
    x: 1702990550000,
    y: 17543.36,
  },
  {
    x: 1702990600000,
    y: 17545.87,
  },
  {
    x: 1702990650000,
    y: 17545.54,
  },
  {
    x: 1702990700000,
    y: 17542.54,
  },
  {
    x: 1702990750000,
    y: 17533.21,
  },
  {
    x: 1702990800000,
    y: 17545.41,
  },
  {
    x: 1702990850000,
    y: 17541.03,
  },
  {
    x: 1702990900000,
    y: 17547.79,
  },
  {
    x: 1702990950000,
    y: 17545.06,
  },
  {
    x: 1702991000000,
    y: 17548.55,
  },
  {
    x: 1702991050000,
    y: 17547.44,
  },
  {
    x: 1702991100000,
    y: 17547.9,
  },
  {
    x: 1702991150000,
    y: 17539.87,
  },
  {
    x: 1702991200000,
    y: 17538.51,
  },
  {
    x: 1702991250000,
    y: 17546.23,
  },
  {
    x: 1702991300000,
    y: 17545.91,
  },
  {
    x: 1702991350000,
    y: 17548,
  },
  {
    x: 1702991400000,
    y: 17548.25,
  },
  {
    x: 1702991450000,
    y: 17549.67,
  },
  {
    x: 1702991500000,
    y: 17550.2,
  },
  {
    x: 1702991550000,
    y: 17558.94,
  },
  {
    x: 1702991600000,
    y: 17560.03,
  },
  {
    x: 1702991650000,
    y: 17561.2,
  },
  {
    x: 1702991700000,
    y: 17549.09,
  },
  {
    x: 1702991750000,
    y: 17553.35,
  },
  {
    x: 1702991800000,
    y: 17560.64,
  },
  {
    x: 1702991850000,
    y: 17553.92,
  },
  {
    x: 1702991900000,
    y: 17560.76,
  },
  {
    x: 1702991950000,
    y: 17552.26,
  },
  {
    x: 1702992000000,
    y: 17558.97,
  },
  {
    x: 1702992050000,
    y: 17565.71,
  },
  {
    x: 1702992100000,
    y: 17567.98,
  },
  {
    x: 1702992150000,
    y: 17557.54,
  },
  {
    x: 1702992200000,
    y: 17557.73,
  },
  {
    x: 1702992250000,
    y: 17566.76,
  },
  {
    x: 1702992300000,
    y: 17561.47,
  },
  {
    x: 1702992350000,
    y: 17561.37,
  },
  {
    x: 1702992400000,
    y: 17561.37,
  },
  {
    x: 1702992450000,
    y: 17561.37,
  },
  {
    x: 1702992500000,
    y: 17561.37,
  },
  {
    x: 1702992550000,
    y: 17561.37,
  },
  {
    x: 1702992600000,
    y: 17576.55,
  },
];

console.log(dataForDemo.length);

export default function LatestStockPrice() {
  const [formattedData, setFormattedData] = useState<
    { x: number; y: number }[]
  >([]);
  const location = useLocation();
  const [rise, setRise] = useState<boolean>(false);
  const [date, setDate] = useState<string>("");
  const [isLoading, setIsLoading] = useState<boolean>(true);

  const chartsColor = rise ? "rgba(255, 0, 0, 0.5)" : "rgb(201,228,222)";
  const chartsBorderColor = rise ? "rgb(242,53,69)" : "#0A9981";

  const chartsTransparentColor = rise
    ? "rgba(255, 0, 0, 0.1)"
    : "rgba(39, 208, 115, 0.1)";

  const getTaiwanStockKBar = async (startDate: string) => {
    try {
      const res = await api.getTaiwanVariousIndicators5Seconds(startDate);
      if (res.data[0].TAIEX < res.data[res.data.length - 1].TAIEX)
        setRise(true);

      const chartsData = res.data.filter((item: PERProps) => {
        if (res.data.indexOf(item) % 10 === 0) {
          setDate(item.date.split(" ")[0]);
          const timeArray = item.date.split(" ");
          const year = timeArray[0].split("-")[0];
          const month = timeArray[0].split("-")[1];
          const day = timeArray[0].split("-")[2];
          const time = timeArray[1].split(":");
          const dateTime = Date.UTC(
            parseInt(year),
            parseInt(month) - 1,
            parseInt(day),
            parseInt(time[0]),
            parseInt(time[1]),
            parseInt(time[2]),
          );

          return {
            x: dateTime,
            y: item.TAIEX,
          };
        }
      });

      const newData = chartsData.map((item: PERProps) => {
        setDate(item.date.split(" ")[0]);
        const timeArray = item.date.split(" ");
        const year = timeArray[0].split("-")[0];
        const month = timeArray[0].split("-")[1];
        const day = timeArray[0].split("-")[2];
        const time = timeArray[1].split(":");
        const dateTime = Date.UTC(
          parseInt(year),
          parseInt(month) - 1,
          parseInt(day),
          parseInt(time[0]),
          parseInt(time[1]),
          parseInt(time[2]),
        );

        return {
          x: dateTime,
          y: item.TAIEX,
        };
      });
      setFormattedData(newData);
    } finally {
      setIsLoading(false);
    }
  };
  const options = {
    chart: {
      type: "area",
    },
    title: {
      text: `${date} 上市加權指數`,
      style: {
        fontSize: "24px",
      },
    },
    xAxis: {
      type: "datetime",
    },
    yAxis: {
      showFirstLabel: false,
      title: false,
    },

    plotOptions: {
      area: {
        fillColor: {
          linearGradient: {
            x1: 0,
            y1: 0,
            x2: 0,
            y2: 1,
          },
          stops: [
            [0, chartsColor], // 開始顏色
            [1, chartsTransparentColor], // 结束颜色，透明
          ],
        },
        marker: {
          radius: 2,
        },
        lineWidth: 0,
        states: {
          hover: {
            lineWidth: 0,
          },
        },
        threshold: null,
      },
    },
    credits: {
      enabled: false, // 刪除 Highcharts 連結
    },
    series: [
      {
        type: "area",
        name: "股價",
        turboThreshold: 4000,
        data: dataForDemo,
        showInLegend: false,
        color: chartsBorderColor,
        lineWidth: 2,
      },
    ],
  };

  useEffect(() => {
    const currentHours = new Date().getHours();
    const chartDay =
      currentHours > 14 ? timeSelector.endDate : timeSelector.lastOpeningDate;
    getTaiwanStockKBar(chartDay);
  }, []);

  console.log(formattedData);

  return (
    <>
      <Card className=" col-span-2 h-full w-full p-4">
        {isLoading ? (
          <Spinner className="h-[400px]" />
        ) : (
          <HighchartsReact
            highcharts={Highcharts}
            options={options}
            containerProps={
              location.pathname.split("/")[1] === "dashboard" && {
                style: { height: "100%", width: "100%" },
              }
            }
          />
        )}
      </Card>
    </>
  );
}
